---
import { Image } from 'astro:assets';

type Props = {
  project: {
    data: {
      title: string;
      description: string;
      cover?: ImageMetadata;
      link: string;
    };
  };
};

const { project } = Astro.props;
const isExternal = project.data.link?.startsWith('http');
---

<a 
  href={project.data.link}
  target={isExternal ? "_blank" : undefined}
  rel={isExternal ? "noopener noreferrer" : undefined}
  class="bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all hover:-translate-y-1 overflow-hidden flex flex-col h-full group"
>
  {project.data.cover && (
    <div class="h-48 overflow-hidden border-b border-gray-100 bg-gray-50">
      <Image 
        src={project.data.cover} 
        alt={project.data.title}
        class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
        quality={60}
        format="webp"
        widths={[320, 480]}
        sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
      />
    </div>
  )}
  <div class="p-6 flex flex-col flex-grow">
    <h3 class="text-lg font-semibold text-gray-900 mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors">
      {project.data.title}
    </h3>
    <p class="text-gray-600 mb-4 text-sm line-clamp-3 flex-grow">
      {project.data.description}
    </p>
    <span class="inline-flex items-center text-sm font-medium text-blue-600 group-hover:text-blue-700">
      <span data-i18n-key="project.learnMore">Open link</span>
      <svg class="ml-1 w-4 h-4 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </span>
  </div>
</a>
